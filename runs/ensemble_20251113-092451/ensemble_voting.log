2025-11-13 09:24:51 | INFO | 开始集成学习投票预测
2025-11-13 09:24:51 | INFO |   集成方法: stacking
2025-11-13 09:24:51 | INFO |   数据目录: features
2025-11-13 09:24:51 | INFO |   保存目录: runs/ensemble_20251113-092451
2025-11-13 09:24:51 | INFO |   交叉验证折数: 5
2025-11-13 09:24:51 | INFO |   使用概率特征: True
2025-11-13 09:24:51 | INFO |   权重策略: 等权重
2025-11-13 09:24:51 | INFO | 📥 加载已训练的模型...
2025-11-13 09:24:51 | INFO | 📊 加载数据集...
2025-11-13 09:24:51 | INFO | 📊 加载数据集...
2025-11-13 09:24:51 | INFO | 📥 加载特征: features/train_features.joblib
2025-11-13 09:24:51 | INFO |    • 特征形状: (8000, 512)
2025-11-13 09:24:51 | INFO |    • 标签数量: 8000
2025-11-13 09:24:51 | INFO |    • 类别: [0 1]
2025-11-13 09:24:51 | INFO | 📥 加载特征: features/val_features.joblib
2025-11-13 09:24:51 | INFO |    • 特征形状: (1000, 512)
2025-11-13 09:24:51 | INFO |    • 标签数量: 1000
2025-11-13 09:24:51 | INFO |    • 类别: [0 1]
2025-11-13 09:24:51 | INFO | 📥 加载特征: features/test_features.joblib
2025-11-13 09:24:51 | INFO |    • 特征形状: (1000, 512)
2025-11-13 09:24:51 | INFO |    • 标签数量: 1000
2025-11-13 09:24:51 | INFO |    • 类别: [0 1]
2025-11-13 09:24:51 | INFO | 📊 数据集规模:
2025-11-13 09:24:51 | INFO |    • TRAIN: 8000 样本
2025-11-13 09:24:51 | INFO |    • VAL  : 1000 样本
2025-11-13 09:24:51 | INFO |    • TEST : 1000 样本
2025-11-13 09:24:51 | INFO | 🔧 创建 Stacking 集成模型...
2025-11-13 09:24:51 | INFO | 🔧 开始训练 Stacking 集成模型...
2025-11-13 09:24:51 | INFO |    基模型数量: 3
2025-11-13 09:24:51 | INFO |    交叉验证折数: 5
2025-11-13 09:24:51 | INFO |    使用概率特征: True
2025-11-13 09:24:51 | INFO |    训练 Fold 1/5...
2025-11-13 09:24:59 | INFO |    训练 Fold 2/5...
2025-11-13 09:25:07 | INFO |    训练 Fold 3/5...
2025-11-13 09:25:15 | INFO |    训练 Fold 4/5...
2025-11-13 09:25:23 | INFO |    训练 Fold 5/5...
2025-11-13 09:25:32 | INFO | ✅ 基模型交叉验证完成
2025-11-13 09:25:32 | INFO | 🔄 在完整训练集上重新训练基模型...
2025-11-13 09:25:32 | INFO |    ✅ 逻辑回归 训练完成
2025-11-13 09:25:36 | INFO |    ✅ 随机森林 训练完成
2025-11-13 09:25:44 | INFO |    ✅ SVM 训练完成
2025-11-13 09:25:44 | INFO | 🎯 训练元学习器...
2025-11-13 09:25:44 | INFO | ✅ Stacking 集成模型训练完成
2025-11-13 09:25:44 | INFO | 📊 元学习器系数:
2025-11-13 09:25:44 | INFO |    逻辑回归: 0.4766
2025-11-13 09:25:44 | INFO |    随机森林: 1.2442
2025-11-13 09:25:44 | INFO |    SVM: 10.2672
2025-11-13 09:25:44 | INFO | ✅ Stacking 集成模型训练完成
2025-11-13 09:25:44 | INFO | 📈 评估集成模型...
2025-11-13 09:25:59 | INFO | Train | acc=1.0000, prec=1.0000, rec=1.0000, f1=1.0000, auc=1.0000
2025-11-13 09:26:01 | INFO | Val | acc=0.8120, prec=0.8210, rec=0.7980, f1=0.8093, auc=0.8929
2025-11-13 09:26:04 | INFO | Test | acc=0.8030, prec=0.8111, rec=0.7900, f1=0.8004, auc=0.8936
2025-11-13 09:26:04 | INFO | 🔍 进行模型诊断分析...
2025-11-13 09:26:04 | INFO | 
============================================================
2025-11-13 09:26:04 | INFO | 📊 模型诊断分析报告
2025-11-13 09:26:04 | INFO | ============================================================
2025-11-13 09:26:05 | INFO | 
📈 模型预测一致性分析:
2025-11-13 09:26:05 | INFO |    逻辑回归 vs 随机森林: Kappa = 0.6362
2025-11-13 09:26:05 | INFO |    逻辑回归 vs SVM: Kappa = 0.7221
2025-11-13 09:26:05 | INFO |    随机森林 vs SVM: Kappa = 0.6574
2025-11-13 09:26:05 | INFO | 
✅ 所有模型预测一致的样本: 754/1000 (75.40%)
2025-11-13 09:26:05 | INFO | ❌ 模型预测存在分歧的样本: 246/1000 (24.60%)
2025-11-13 09:26:05 | INFO | 
🔍 各模型错误分析:
2025-11-13 09:26:05 | INFO |    逻辑回归: 准确率 = 0.7700, 错误数 = 230
2025-11-13 09:26:05 | INFO |    随机森林: 准确率 = 0.7480, 错误数 = 252
2025-11-13 09:26:05 | INFO |    SVM: 准确率 = 0.8150, 错误数 = 185
2025-11-13 09:26:05 | INFO | 
🔗 模型错误重叠分析:
2025-11-13 09:26:05 | INFO |    逻辑回归 vs 随机森林:
2025-11-13 09:26:05 | INFO |       共同错误: 150, 仅逻辑回归错误: 80, 仅随机森林错误: 102
2025-11-13 09:26:05 | INFO |       错误重叠率: 0.4518
2025-11-13 09:26:05 | INFO |    逻辑回归 vs SVM:
2025-11-13 09:26:05 | INFO |       共同错误: 138, 仅逻辑回归错误: 92, 仅SVM错误: 47
2025-11-13 09:26:05 | INFO |       错误重叠率: 0.4982
2025-11-13 09:26:05 | INFO |    随机森林 vs SVM:
2025-11-13 09:26:05 | INFO |       共同错误: 133, 仅随机森林错误: 119, 仅SVM错误: 52
2025-11-13 09:26:05 | INFO |       错误重叠率: 0.4375
2025-11-13 09:26:05 | INFO | 
🔄 模型互补性分析:
2025-11-13 09:26:05 | INFO |    逻辑回归 对 SVM 的互补性:
2025-11-13 09:26:05 | INFO |       SVM错但逻辑回归对: 47
2025-11-13 09:26:05 | INFO |       SVM对但逻辑回归错: 92
2025-11-13 09:26:05 | INFO |       互补性比率: 0.2541
2025-11-13 09:26:05 | INFO |    随机森林 对 SVM 的互补性:
2025-11-13 09:26:05 | INFO |       SVM错但随机森林对: 52
2025-11-13 09:26:05 | INFO |       SVM对但随机森林错: 119
2025-11-13 09:26:05 | INFO |       互补性比率: 0.2811
2025-11-13 09:26:05 | INFO | 
💡 集成效果分析:
2025-11-13 09:26:05 | INFO |    最佳单模型: SVM (准确率: 0.8150)
2025-11-13 09:26:05 | INFO |    多数投票准确率: 0.7910
2025-11-13 09:26:05 | INFO |    ⚠️  多数投票不如最佳单模型，下降: 0.0240
2025-11-13 09:26:05 | INFO | 
   可能原因:
2025-11-13 09:26:05 | INFO |    1. 弱模型拖累: 随机森林 表现明显较差
2025-11-13 09:26:05 | INFO |    3. 最佳模型已经表现很好 (0.8150)，集成收益有限
2025-11-13 09:26:05 | INFO |    4. 在分歧样本中，多数投票准确率: 0.5813
2025-11-13 09:26:05 | INFO | 
============================================================
2025-11-13 09:26:05 | INFO | 💾 分析结果已保存: runs/ensemble_20251113-092451/model_analysis.json
2025-11-13 09:26:05 | INFO | 🎨 生成可视化结果...
2025-11-13 09:26:05 | INFO | 📊 PR 曲线已保存
2025-11-13 09:26:13 | INFO | 📊 train 混淆矩阵已保存
2025-11-13 09:26:20 | INFO | 📊 train ROC 曲线已保存
2025-11-13 09:26:21 | INFO | 📊 val 混淆矩阵已保存
2025-11-13 09:26:22 | INFO | 📊 val ROC 曲线已保存
2025-11-13 09:26:23 | INFO | 📊 test 混淆矩阵已保存
2025-11-13 09:26:24 | INFO | 📊 test ROC 曲线已保存
2025-11-13 09:26:24 | INFO | 💾 结果已保存: runs/ensemble_20251113-092451/ensemble_results.json
2025-11-13 09:26:24 | INFO | 集成学习完成
2025-11-13 09:26:24 | INFO |   耗时: 1.6分钟
2025-11-13 09:26:24 | INFO |   验证集准确率: 0.8120
2025-11-13 09:26:24 | INFO |   测试集准确率: 0.8030
2025-11-13 09:26:24 | INFO |   结果目录: runs/ensemble_20251113-092451
